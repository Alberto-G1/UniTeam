<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}UniTeam - University Group Project Management{% endblock %}</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Link to your static CSS file -->
    <link rel="stylesheet" href="{% static 'css/student_base.css' %}">
    

    <!-- Additional meta tags -->
    <meta name="description" content="UniTeam - University Group Project Management System for seamless collaboration">
    <meta name="keywords" content="university, project management, group work, collaboration, students">
    <meta name="author" content="UniTeam Development Team">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="#" />
    
    <!-- Additional CSS -->
    {% block extra_css %}{% endblock %}
</head>

<body class="min-h-screen flex flex-col">
    <!-- Header Section -->
    <header class="header-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <!-- Top Bar -->
            <div class="flex justify-between items-center">
                <!-- Logo and Brand -->
                <div class="logo-container">
                    <!-- Replace with your actual logo -->
                    <img src="{% static 'images/logo/uniteam_logo (1).png'%}" alt="UniTeam Logo" class="w-10 h-10 rounded-lg" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div>
                        <h1 class="text-xl font-bold">project Hub</h1>
                        <p class="text-xs opacity-75">University Project Management</p>
                    </div>
                </div>

                <!-- Right Side Controls -->
                <div class="flex items-center space-x-4">
                    <!-- Theme Toggle -->
                    <div class="theme-toggle" id="themeToggle" title="Toggle Theme"></div>

                    {% if user.is_authenticated %}
                        <!-- Notifications (if needed) -->
                        <div class="relative cursor-pointer" id="notificationButton" title="Notifications">
                            <i class="fa-solid fa-bell w-6 h-6 text-white hover:text-accent-1 transition-colors"></i>
                            <!-- Notification badge (example) -->
                            <span class="notification-badge">3</span>
                        </div>

                        <!-- Profile Dropdown -->
                        <div class="profile-dropdown">
                            <div class="flex items-center gap-2 cursor-pointer" id="profileButton">
                                {% if user.avatar %}
                                    <img src="{{ user.avatar.url }}" alt="{{ user.username }}'s Avatar" class="profile-avatar object-cover">
                                {% else %}
                                    <div class="profile-avatar bg-accent-1 flex items-center justify-center text-white font-bold">
                                        {{ user.first_name.0|default:user.username.0|upper }}
                                    </div>
                                {% endif %}
                                <span class="hidden md:block text-sm font-medium">{{ user.first_name|default:user.username }}</span>
                                <i class="fa-solid fa-chevron-down w-4 h-4 transition-transform" id="profileArrow"></i>
                            </div>
                            
                            <div class="dropdown-menu" id="profileDropdown">
                                <div class="dropdown-item border-b border-gray-200">
                                    <div class="flex flex-col">
                                        <span class="font-medium">{{ user.get_full_name|default:user.username }}</span>
                                        <span class="text-xs opacity-75">{{ user.email }}</span>
                                    </div>
                                </div>
                                <a href="{% url 'profile_details' %}" class="dropdown-item">
                                    <i class="fa-solid fa-user w-4 h-4"></i>
                                    My Profile
                                </a>
                                <a href="#" class="dropdown-item">
                                    <i class="fa-solid fa-gear w-4 h-4"></i>
                                    Settings
                                </a>
                                <a href="#" class="dropdown-item">
                                    <i class="fa-solid fa-circle-question w-4 h-4"></i>
                                    Help & Support
                                </a>
                                <a href="{% url 'logout' %}" class="dropdown-item text-red-600 hover:text-red-700">
                                    <i class="fa-solid fa-right-from-bracket w-4 h-4"></i>
                                    Logout
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <!-- Authentication Buttons -->
                        <div class="flex items-center space-x-3">
                            <a href="#" class="btn btn-secondary">LOGIN</a>
                            <a href="#" class="btn btn-primary">REGISTER</a>
                        </div>
                    {% endif %}

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                        <i class="fa-solid fa-bars h-6 w-6" id="hamburger-icon"></i>
                        <i class="fa-solid fa-xmark h-6 w-6 hidden" id="close-icon"></i>
                    </button>
                </div>
            </div>

            <!-- Navigation Menu (Desktop - only for authenticated users) -->
            {% if user.is_authenticated %}
            <nav class="hidden md:block mt-4 pt-4 border-t border-white border-opacity-20">
                <div class="flex space-x-2">
                    <a href="{% url 'student_dashboard' %}" class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                        <i class="fa-solid fa-gauge-high w-4 h-4"></i>
                        Dashboard
                    </a>
                    <a href="{% url 'create_project' %}" class="nav-link {% if request.resolver_match.url_name == 'projects' %}active{% endif %}">
                        <i class="fa-solid fa-folder w-4 h-4"></i>
                        Create Project
                    </a>
                    <a href="{% url 'my_projects' %}" class="nav-link {% if request.resolver_match.url_name == 'projects' %}active{% endif %}">
                        <i class="fa-solid fa-diagram-project w-4 h-4"></i>
                        My Projects
                    </a>
                    <a href="{% url 'view_invitations' %}" class="nav-link {% if request.resolver_match.url_name == 'invitations' %}active{% endif %}">
                        <i class="fa-solid fa-inbox w-4 h-4"></i>
                        Invitations
                    </a>
                    <a href="" class="nav-link {% if request.resolver_match.url_name == 'tasks' %}active{% endif %}">
                        <i class="fa-solid fa-list-check w-4 h-4"></i>
                        Tasks
                    </a>
                    <a href="#" class="nav-link {% if request.resolver_match.url_name == 'files' %}active{% endif %}">
                        <i class="fa-solid fa-file-lines w-4 h-4"></i>
                        Files
                    </a>
                    <a href="#" class="nav-link {% if request.resolver_match.url_name == 'communication' %}active{% endif %}">
                        <i class="fa-solid fa-comments w-4 h-4"></i>
                        Communication
                    </a>
                    <a href="#" class="nav-link {% if request.resolver_match.url_name == 'calendar' %}active{% endif %}">
                        <i class="fa-solid fa-calendar-days w-4 h-4"></i>
                        Calendar
                    </a>
                </div>
            </nav>
            {% endif %}
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden hidden"></div>

    <!-- Mobile Menu (Slide-out) -->
    {% if user.is_authenticated %}
    <div id="mobile-menu" class="mobile-menu fixed inset-y-0 left-0 z-50 w-80 surface shadow-2xl md:hidden">
        <div class="p-6 border-b border-accent-2">
            <div class="logo-container">
                <div class="logo-placeholder"><img src="{% static 'images/logo/uniteam_logo (1).png'%}" alt=""></div>
                <div>
                    <h1 class="text-lg font-bold accent-2">Proect Hub</h1>
                    <p class="text-xs opacity-75">Project Management</p>
                </div>
            </div>
        </div>
        
        <nav class="p-4 space-y-2">
            <a href="{% url 'student_dashboard' %}" class="nav-link block {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                <i class="fa-solid fa-gauge-high w-4 h-4"></i>
                Dashboard
            </a>
            <a href="{% url 'my_projects' %}" class="nav-link block {% if request.resolver_match.url_name == 'projects' %}active{% endif %}">
                <i class="fa-solid fa-folder-tree w-4 h-4"></i>
                My Projects
            </a>
            <a href="{% url 'view_invitations' %}" class="nav-link block {% if request.resolver_match.url_name == 'invitations' %}active{% endif %}">
                <i class="fa-solid fa-inbox w-4 h-4"></i>
                My Invitations
            </a>
            <a href="{% url 'create_project' %}" class="nav-link {% if request.resolver_match.url_name == 'projects' %}active{% endif %}">
                <i class="fa-solid fa-folder w-4 h-4"></i>
                My Projects
            </a>
            <a href="{% url 'my_projects' %}" class="nav-link block {% if request.resolver_match.url_name == 'projects' %}active{% endif %}">
                <i class="fa-solid fa-diagram-project w-4 h-4"></i>
                My Projects
            </a>
            <a href="#" class="nav-link block {% if request.resolver_match.url_name == 'tasks' %}active{% endif %}">
                <i class="fa-solid fa-list-check w-4 h-4"></i>
                Tasks
            </a>
            <a href="#" class="nav-link block {% if request.resolver_match.url_name == 'files' %}active{% endif %}">
                <i class="fa-solid fa-file-lines w-4 h-4"></i>
                Files
            </a>
            <a href="#" class="nav-link block {% if request.resolver_match.url_name == 'communication' %}active{% endif %}">
                <i class="fa-solid fa-comments w-4 h-4"></i>
                Communication
            </a>
            <a href="#" class="nav-link block {% if request.resolver_match.url_name == 'calendar' %}active{% endif %}">
                <i class="fa-solid fa-calendar-days w-4 h-4"></i>
                Calendar
            </a>
            <a href="{% url 'logout' %}" class="nav-link block text-red-600 hover:text-red-700">
                <i class="fa-solid fa-right-from-bracket w-4 h-4"></i>
                Logout
            </a>
        </nav>
    </div>
    {% endif %}

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6 surface shadow-md my-6 rounded-lg">

        {% block content %}
        <div class="text-center">
            <h1 class="text-3xl font-bold">Welcome, Student!</h1>
            <p class="mt-2 text-gray-600">This is your dashboard. Your projects and tasks will appear here.</p>
            <a href="{% url 'logout' %}" class="mt-4 inline-block bg-red-500 text-white font-bold py-2 px-4 rounded hover:bg-red-700">Logout</a>
            <a href="{% url 'create_project' %}" class="btn btn-primary ml-auto">Create Project</a>
        </div>
        {% endblock %}

    </main>

    <!-- Footer (only for authenticated users) -->
    {% if user.is_authenticated %}
    <footer class="footer-bg text-white py-6 mt-auto">
        <div class="container mx-auto px-4">
            <div class="footer-content">
                <div class="personal-branding">
                    <div class="personal-logo">UT</div>
                    <span>Designed by [Your Name]</span>
                </div>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Contact</a>
                    <a href="#">About</a>
                </div>
            </div>
        </div>
    </footer>
    {% endif %}


    <!-- JavaScript -->
    <script src="{% static 'js/student_base.js' %}"></script>
    
    {% block extra_js %}
    <!-- Additional JavaScript for child templates -->
    {% endblock %}
</body>
</html>